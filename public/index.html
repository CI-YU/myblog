<!DOCTYPE html>
<html lang="en" dir="auto">

<head>
	<meta name="generator" content="Hugo 0.111.3"><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>CI-YU Blog</title>

<meta name="description" content="">
<meta name="author" content="">
<link rel="canonical" href="https://ci-yu.top/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.3613efbd0b1772781e8f49935e973cae632a7f61471c05b17be155505ccf87b5.css" integrity="sha256-NhPvvQsXcngej0mTXpc8rmMqf2FHHAWxe&#43;FVUFzPh7U=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://ci-yu.top/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://ci-yu.top/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://ci-yu.top/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://ci-yu.top/apple-touch-icon.png">
<link rel="mask-icon" href="https://ci-yu.top/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" type="application/rss+xml" href="https://ci-yu.top/index.xml">
<link rel="alternate" type="application/json" href="https://ci-yu.top/index.json">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:title" content="CI-YU Blog" />
<meta property="og:description" content="" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://ci-yu.top/" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="CI-YU Blog"/>
<meta name="twitter:description" content=""/>

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Organization",
  "name": "CI-YU Blog",
  "url": "https://ci-yu.top/",
  "description": "",
  "thumbnailUrl": "https://ci-yu.top/favicon.ico",
  "sameAs": [
      "https://github.com/CI-YU", "https://www.linkedin.com/in/ci-yu-huang-8a75a21b0/"
  ]
}
</script>
</head>

<body class="list" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://ci-yu.top/" accesskey="h" title="CI-YU Blog (Alt + H)">CI-YU Blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://ci-yu.top/dotnet/" title="Dotnet">
                    <span>Dotnet</span>
                </a>
            </li>
            <li>
                <a href="https://ci-yu.top/flutter/" title="Flutter">
                    <span>Flutter</span>
                </a>
            </li>
            <li>
                <a href="https://ci-yu.top/softpower/" title="SoftPower">
                    <span>SoftPower</span>
                </a>
            </li>
            <li>
                <a href="https://ci-yu.top/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
            <li>
                <a href="https://ci-yu.top/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
            <li>
                <a href="https://ci-yu.top/archives/" title="Archives">
                    <span>Archives</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main"> 
<article class="first-entry home-info">
    <header class="entry-header">
        <h1>Hi there ğŸ‘‹</h1>
    </header>
    <div class="entry-content">
        Welcome to my blog
    </div>
    <footer class="entry-footer">
        <div class="social-icons">
    <a href="https://github.com/CI-YU" target="_blank" rel="noopener noreferrer me" title="Github">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
    stroke-linecap="round" stroke-linejoin="round">
    <path
        d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22">
    </path>
</svg>
    </a>
    <a href="https://www.linkedin.com/in/ci-yu-huang-8a75a21b0/" target="_blank" rel="noopener noreferrer me" title="Linkedin">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
    stroke-linecap="round" stroke-linejoin="round">
    <path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path>
    <rect x="2" y="9" width="4" height="12"></rect>
    <circle cx="4" cy="4" r="2"></circle>
</svg>
    </a>
</div>

    </footer>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2>2022ITHelp dotnet6 Hangfireç¯„ä¾‹
    </h2>
  </header>
  <div class="entry-content">
    <p>ç›®çš„ åœ¨windowsç³»çµ±ä¸Šæƒ³åŸ·è¡Œæ’ç¨‹æœ‰å…©å€‹é¸æ“‡
ä½¿ç”¨windowså·¥ä½œæ’ç¨‹å™¨åŸ·è¡Œexeæª” é€éHangfireé€²è¡Œæ’ç¨‹ç®¡ç† æ­¤æ¬¡æ•™å­¸èªªæ˜å¦‚ä½•ä½¿ç”¨HangfireåŸ·è¡Œæ’ç¨‹
å»ºç«‹æ–°å°ˆæ¡ˆ é¸æ“‡ASP.NET Core Web APIå°ˆæ¡ˆç¯„æœ¬ï¼Œä¸¦åŸ·è¡Œä¸‹ä¸€æ­¥ è¨­å®šæ–°çš„å°ˆæ¡ˆ å‘½åä½ çš„å°ˆæ¡ˆåç¨±ï¼Œä¸¦é¸æ“‡å°ˆæ¡ˆè¦å­˜æ”¾çš„ä½ç½®ã€‚ å…¶ä»–è³‡è¨Š ç›´æ¥é€²è¡Œä¸‹ä¸€æ­¥ NuGetåŠ å…¥å¥—ä»¶ Hangfire Hangfire.InMemory ç·¨è¼¯Program.csæª” using Hangfire; var builder = WebApplication.CreateBuilder(args); // Add services to the container. builder.Services.AddControllers(); // Learn more about configuring Swagger/OpenAPI at https://aka.ms/aspnetcore/swashbuckle builder.Services.AddEndpointsApiExplorer(); builder.Services.AddSwaggerGen(); //è¨»å†Šhangfireä¸¦ä¸”ä½¿ç”¨è¨˜æ†¶é«”ä¿å­˜æ’ç¨‹ï¼Œ //é è¨­æ‰€ä¸‹è¼‰çš„HangFireå¥—ä»¶å¯ä»¥ä½¿ç”¨sqlserverï¼Œå¯é€éconfig.UseSqlServerStorage();ï¼Œä½†éœ€è¦è¨­å®š builder.Services.AddHangfire(config =&gt; { config.UseInMemoryStorage(); }); //è¨»å†Šhangfireè¦ä½¿ç”¨çš„ä¼ºæœå™¨ï¼Œä¼ºæœå™¨å°±æ˜¯ä¸Šé¢æ‰€å¯«çš„ä½¿ç”¨è¨˜æ†¶é«”ç•¶ä¼ºæœå™¨ builder.Services.AddHangfireServer(); var app = builder.Build(); // Configure the HTTP request pipeline. if (app.Environment.IsDevelopment()) { app.UseSwagger(); app.UseSwaggerUI(); } app.UseHttpsRedirection(); app.UseAuthorization(); //ä½¿ç”¨hangfireå…§å»ºçš„å„€è¡¨æ¿ app.UseHangfireDashboard(); app....</p>
  </div>
  <footer class="entry-footer"><span title='2022-10-11 02:39:15 +0800 CST'>October 11, 2022</span></footer>
  <a class="entry-link" aria-label="post link to 2022ITHelp dotnet6 Hangfireç¯„ä¾‹" href="https://ci-yu.top/dotnet/%E9%90%B5%E4%BA%BA%E8%B3%BD-net6-hangfire%E7%AF%84%E4%BE%8B/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2>2022ITHelp dotnet6 HttpClientå–®å…ƒæ¸¬è©¦ç¯„ä¾‹
    </h2>
  </header>
  <div class="entry-content">
    <p>ç›®çš„ é¢è©¦çš„æ™‚å€™è¢«å•åˆ°è¦å¦‚ä½•åšåŒ…å«å¤–éƒ¨apiçš„å–®å…ƒæ¸¬è©¦å•é¡Œï¼Œç¨å¾®æŸ¥ä¸€ä¸‹å…¶å¯¦å¾ˆç°¡å–®ï¼Œæ€éº¼ç•¶ä¸‹ç­”ä¸å‡ºä¾†å‘¢? ä¸»è¦æœ‰å…©ç¨®æ–¹å¼ï¼Œä¸€ç¨®ç‚º.net core 2.1ä»¥å¾Œæœ‰æä¾›IHttpClientFactoryçš„ä»‹é¢å¯ä»¥ä½¿ç”¨ã€‚
å»ºç«‹æ–°å°ˆæ¡ˆ é¸æ“‡ASP.NET Core Web APIå°ˆæ¡ˆç¯„æœ¬ï¼Œä¸¦åŸ·è¡Œä¸‹ä¸€æ­¥ è¨­å®šæ–°çš„å°ˆæ¡ˆ å‘½åä½ çš„å°ˆæ¡ˆåç¨±ï¼Œä¸¦é¸æ“‡å°ˆæ¡ˆè¦å­˜æ”¾çš„ä½ç½®ã€‚ å…¶ä»–è³‡è¨Š ç›´æ¥é€²è¡Œä¸‹ä¸€æ­¥ å»ºç«‹è³‡æ–™å¤¾ ç·¨è¼¯Program.csæª”æ¡ˆ è¨»å†ŠAddHttpClientã€‚
builder.Services.AddHttpClient(); æ–°å¢ä¸€å€‹é¡åˆ¥æª” åŠ å…¥å‰ åŠ å…¥å¾Œ å»ºæ§‹å­æ³¨å…¥ å°‡è¨»å†Šçš„httpclienté€éå»ºæ§‹å­æ³¨å…¥
readonly IHttpClientFactory _httpClientFactory;public CallAPIServices(IHttpClientFactory httpClientFactory) {_httpClientFactory = httpClientFactory;} åŠ å…¥å‰ åŠ å…¥å¾Œ æ–°å¢æ–¹æ³• æ–°å¢ä¸€å€‹æœƒå»ç™¼å¤–éƒ¨è«‹æ±‚çš„æ–¹æ³•ï¼Œæ¨¡æ“¬ç•¶æœ‰åŒ…å«ç¬¬ä¸‰æ–¹apiæ™‚å¦‚ä½•æ¸¬è©¦
public async Task&lt;string&gt; Get() {var client = _httpClientFactory.CreateClient();var response = await client.GetAsync(&#34;https://example.com&#34;);if (response.IsSuccessStatusCode) {var responseString = await response.Content.ReadAsStringAsync();return responseString;}return &#34;&#34;;} æ–°å¢æ¸¬è©¦å°ˆæ¡ˆ å°æ–¹æ¡ˆé»é¸å³éµ&gt;åŠ å…¥&gt;æ–°å¢å°ˆæ¡ˆ
è¨­å®šæ–°çš„å°ˆæ¡ˆ æ›¿æ¸¬è©¦å°ˆæ¡ˆå‘½åï¼Œå»ºè­°å‘½åè¦å‰‡ä»¥.Testsåšçµå°¾ å…¶ä»–è³‡è¨Š å°ˆæ¡ˆæ¶æ§‹éœ€è¦èˆ‡è¦æ¸¬è©¦çš„å°ˆæ¡ˆç›¸åŒ åŠ å…¥åƒè€ƒ å°‡è¦æ¸¬è©¦çš„å°ˆæ¡ˆåŠ å…¥æ¸¬è©¦å°ˆæ¡ˆ...</p>
  </div>
  <footer class="entry-footer"><span title='2022-10-10 02:39:15 +0800 CST'>October 10, 2022</span></footer>
  <a class="entry-link" aria-label="post link to 2022ITHelp dotnet6 HttpClientå–®å…ƒæ¸¬è©¦ç¯„ä¾‹" href="https://ci-yu.top/dotnet/%E9%90%B5%E4%BA%BA%E8%B3%BD-net6-httpclient%E5%96%AE%E5%85%83%E6%B8%AC%E8%A9%A6%E7%AF%84%E4%BE%8B/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2>2022ITHelp dotnet6 Moqç¯„ä¾‹
    </h2>
  </header>
  <div class="entry-content">
    <p>ç›®çš„ é€²è¡Œå–®å…ƒæ¸¬è©¦æ™‚ï¼Œå¯ä»¥éš”çµ•ä¾è³´çš„é …ç›®ã€‚
å»ºç«‹æ–°å°ˆæ¡ˆ é¸æ“‡ASP.NET Core Web APIå°ˆæ¡ˆç¯„æœ¬ï¼Œä¸¦åŸ·è¡Œä¸‹ä¸€æ­¥ è¨­å®šæ–°çš„å°ˆæ¡ˆ å‘½åä½ çš„å°ˆæ¡ˆåç¨±ï¼Œä¸¦é¸æ“‡å°ˆæ¡ˆè¦å­˜æ”¾çš„ä½ç½®ã€‚ å…¶ä»–è³‡è¨Š ç›´æ¥é€²è¡Œä¸‹ä¸€æ­¥ å»ºç«‹æ–°çš„é¡åˆ¥åº« é€²è¡Œå‘½åæ™‚é€šå¸¸æœƒèˆ‡è¦æ¸¬è©¦çš„å°ˆæ¡ˆåŒåä¸¦åŠ ä¸Šçµå°¾.Testsï¼Œä»¥æ­¤ç¯„ä¾‹å°±æœƒè®ŠæˆMoqExample.Tests NuGetåŠ å…¥å¥—ä»¶ é‡å°xUnitExample.TestsåŠ å…¥ç›¸é—œå¥—ä»¶
xunit xunit.runner.visualstudio Microsoft.NET.Test.Sdk coverlet.collector Moq é‡å°MoqExample.Testsé¡åˆ¥åº«åŠ å…¥åƒè€ƒ å¼•ç”¨è¦æ¸¬è©¦çš„å°ˆæ¡ˆï¼Œæ‰èƒ½å°‡æ¸¬è©¦èˆ‡å¯¦éš›å°ˆæ¡ˆåˆ‡åˆ†é–‹ä¾† æ–°å¢WeatherForecastControllerTests.csé¡åˆ¥æª” åˆªé™¤é è¨­çš„é¡åˆ¥æª”(Class1.cs)ï¼Œä¸¦åœ¨MoqExample.Testså°ˆæ¡ˆæ–°å¢å°æ‡‰è³‡æ–™å¤¾ï¼Œèˆ‡é¡åˆ¥æª”ä¸¦åŠ çµå°¾Testsã€‚ ç·¨è¼¯WeatherForecastControllerTests.csé¡åˆ¥æª” æ¸¬è©¦éƒ½æœƒåˆ†ä¸‰å€‹éšæ®µ
Arrangeï¼šæº–å‚™éšæ®µï¼ŒåŒ…å«åˆå§‹åŒ–ç›¸é—œè³‡æ–™ Actï¼šåŸ·è¡Œæ¸¬è©¦æ–¹æ³•å¾Œæ‰€å–å¾—çš„çµæœ Assertï¼šé©—è­‰Actå–å¾—çš„çµæœæ˜¯å¦ç¬¦åˆé æœŸçµæœ é€™æ¬¡è¦æ¸¬è©¦çš„æ˜¯controllerï¼Œæœ‰æ³¨å…¥Iloggerï¼Œå¦‚ä½•å°‡Iloggeréš”é–‹çš„é—œéµå°±æ˜¯ä½¿ç”¨Moqé€™å€‹å¥—ä»¶ using Microsoft.Extensions.Logging; using Moq; using MoqExample.Controllers; using Xunit; namespace MoqExample.Tests.Controllers { public class WeatherForecastControllerTests { [Fact] public void Get() { //Arrange //é€émockå°‡å¤–ç•Œçš„ä»‹é¢åŒ…èµ·ä¾† var MockLogger = new Mock&lt;ILogger&lt;WeatherForecastController&gt;&gt;(); //ç•¶æˆç‰©ä»¶å‚³å…¥controllerï¼Œä»£æ›¿å¯¦éš›çš„ä»‹é¢ var Controllers = new WeatherForecastController(MockLogger.Object); //Act //åŸ·è¡Œè¦æ¸¬è©¦çš„å‡½å¼ var Results = Controllers.Get(); //Assert //ç¢ºèªçµæœä¸ç‚ºnull Assert....</p>
  </div>
  <footer class="entry-footer"><span title='2022-10-09 02:39:15 +0800 CST'>October 9, 2022</span></footer>
  <a class="entry-link" aria-label="post link to 2022ITHelp dotnet6 Moqç¯„ä¾‹" href="https://ci-yu.top/dotnet/%E9%90%B5%E4%BA%BA%E8%B3%BD-net6-moq%E7%AF%84%E4%BE%8B/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2>2022ITHelp dotnet6 NLogé€²éšç¯„ä¾‹
    </h2>
  </header>
  <div class="entry-content">
    <p>ç›®çš„ åœ¨å¯«nlog.configæª”æ¡ˆæ™‚è¦ºå¾—æ€éº¼æœ‰é»è¤‡é›œï¼Œæˆ‘åªæ˜¯éœ€è¦ç°¡å–®çš„è¨­å®šæª”å°±å¥½äº†ï¼Œæœ€å¾Œæ±ºå®šé€éappsettingä¾†åšè¨­å®š å°‡logæ–‡ä»¶æ¡ç”¨éåŒæ­¥å¯«å…¥ï¼Œå¯å¤§å¹…æå‡æ•ˆèƒ½ å»ºç«‹æ–°å°ˆæ¡ˆ é¸æ“‡ASP.NET Core Web APIå°ˆæ¡ˆç¯„æœ¬ï¼Œä¸¦åŸ·è¡Œä¸‹ä¸€æ­¥ è¨­å®šæ–°çš„å°ˆæ¡ˆ å‘½åä½ çš„å°ˆæ¡ˆåç¨±ï¼Œä¸¦é¸æ“‡å°ˆæ¡ˆè¦å­˜æ”¾çš„ä½ç½®ã€‚ å…¶ä»–è³‡è¨Š ç›´æ¥é€²è¡Œä¸‹ä¸€æ­¥ 4.NuGetåŠ å…¥å¥—ä»¶ NLog NLog.Web.AspNetCore ç·¨è¼¯Program.csæª” using NLog; using NLog.Web; //åˆå§‹åŒ–NLog var logger = LogManager.Setup() //è¼‰å…¥Configurationä¸¦ä¸”è®€å–appsettingä¾†ä½¿ç”¨ .LoadConfigurationFromAppSettings() .GetCurrentClassLogger(); try { logger.Debug(&#34;init main&#34;); var builder = WebApplication.CreateBuilder(args); // Add services to the container. builder.Logging.ClearProviders(); builder.Host.UseNLog(); builder.Services.AddControllers(); // Learn more about configuring Swagger/OpenAPI at https://aka.ms/aspnetcore/swashbuckle builder.Services.AddEndpointsApiExplorer(); builder.Services.AddSwaggerGen(); //ä»¥ä¸‹çœç•¥ ç·¨è¼¯appsetting.json è¨­å®šNLogï¼ŒåŒ…å«
throwConfigExceptions:è¨­å®šæª”éŒ¯èª¤æ™‚æœƒè·³exception ä½¿ç”¨éåŒæ­¥æ–¹å¼å¯«å…¥æª”æ¡ˆ targets:è¨­å®šè¼¸å‡ºçš„æ ¼å¼ï¼Œä¾‹å¦‚txtæª”æ¡ˆæˆ–æ˜¯Consoleé¡¯ç¤º rules:ä»€éº¼æƒ…æ³è¦åšä»€éº¼å‹•ä½œï¼Œä¾‹å¦‚logåç¨±ç‚ºMicrosoft.AspNetCoreæœ€å°ç­‰ç´šæ˜¯warnæ™‚å¯«åˆ°Console ILogger NLog Level 0 Trace Trace Level 1 Debug Debug Level 2 Information Info Level 3 Warning Warn Level 4 Error Error Level 5 Critical Fatal Level 6 None NLogæ²’æœ‰ { &#34;NLog&#34;: { &#34;throwConfigExceptions&#34;: true, &#34;targets&#34;: { &#34;async&#34;: true, &#34;logfile&#34;: { &#34;type&#34;: &#34;File&#34;, &#34;fileName&#34;: &#34;c:/temp/nlog-${shortdate}....</p>
  </div>
  <footer class="entry-footer"><span title='2022-10-08 02:39:15 +0800 CST'>October 8, 2022</span></footer>
  <a class="entry-link" aria-label="post link to 2022ITHelp dotnet6 NLogé€²éšç¯„ä¾‹" href="https://ci-yu.top/dotnet/%E9%90%B5%E4%BA%BA%E8%B3%BD-net6-nlog%E9%80%B2%E9%9A%8E%E7%AF%84%E4%BE%8B/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2>2022ITHelp dotnet6 xUnitç¯„ä¾‹
    </h2>
  </header>
  <div class="entry-content">
    <p>ç›®çš„ å–®å…ƒæ¸¬è©¦
å»ºç«‹æ–°å°ˆæ¡ˆ é¸æ“‡ASP.NET Core Web APIå°ˆæ¡ˆç¯„æœ¬ï¼Œä¸¦åŸ·è¡Œä¸‹ä¸€æ­¥ è¨­å®šæ–°çš„å°ˆæ¡ˆ å‘½åä½ çš„å°ˆæ¡ˆåç¨±ï¼Œä¸¦é¸æ“‡å°ˆæ¡ˆè¦å­˜æ”¾çš„ä½ç½®ã€‚ å…¶ä»–è³‡è¨Š ç›´æ¥é€²è¡Œä¸‹ä¸€æ­¥ å»ºç«‹æ–°çš„é¡åˆ¥åº« é€²è¡Œå‘½åæ™‚é€šå¸¸æœƒèˆ‡è¦æ¸¬è©¦çš„å°ˆæ¡ˆåŒåä¸¦åŠ ä¸Šçµå°¾.Testsï¼Œä»¥æ­¤ç¯„ä¾‹å°±æœƒè®ŠæˆxUnitExample.Tests NuGetåŠ å…¥å¥—ä»¶ é‡å°xUnitExample.TestsåŠ å…¥ç›¸é—œå¥—ä»¶
xunit xunit.runner.visualstudio Microsoft.NET.Test.Sdk coverlet.collector æ–°å¢Calculator.csé¡åˆ¥æª” åœ¨xUnitExampleå°ˆæ¡ˆæ–°å¢Calculator.csé¡åˆ¥æª” æ–°å¢ä¸€å€‹ç°¡å–®çš„åŠ æ³•å‡½å¼
public static class Calculator { public static double Add(int a, int b) { return a &#43; b; } } é‡å°xUnitExample.Testsé¡åˆ¥åº«åŠ å…¥åƒè€ƒ å¼•ç”¨è¦æ¸¬è©¦çš„å°ˆæ¡ˆï¼Œæ‰èƒ½å°‡æ¸¬è©¦èˆ‡å¯¦éš›å°ˆæ¡ˆåˆ‡åˆ†é–‹ä¾† æ–°å¢CalculatorTests.csé¡åˆ¥æª” åˆªé™¤é è¨­çš„é¡åˆ¥æª”(Class1.cs)ï¼Œå»ºç«‹å°æ‡‰çš„è³‡æ–™å¤¾ä»¥åŠé¡åˆ¥æª”æ¡ˆï¼Œä¸¦åœ¨çµå°¾åŠ ä¸ŠTests ç·¨è¼¯CalculatorTests.csé¡åˆ¥æª” æ¸¬è©¦éƒ½æœƒåˆ†ä¸‰å€‹éšæ®µ
Arrangeï¼šæº–å‚™éšæ®µï¼ŒåŒ…å«åˆå§‹åŒ–ç›¸é—œè³‡æ–™ Actï¼šåŸ·è¡Œæ¸¬è©¦æ–¹æ³•å¾Œæ‰€å–å¾—çš„çµæœ Assertï¼šé©—è­‰Actå–å¾—çš„çµæœæ˜¯å¦ç¬¦åˆé æœŸçµæœ public class CalculatorTests { //å‘Šè¨´ç·¨è­¯å™¨è¦åŸ·è¡Œçš„æ¸¬è©¦æ–¹æ³• [Fact] public void Add_() { //Arrange double Expected = 20; //Act var Actual = Calculator.Add(5, 15); //Assert Assert....</p>
  </div>
  <footer class="entry-footer"><span title='2022-10-08 02:39:15 +0800 CST'>October 8, 2022</span></footer>
  <a class="entry-link" aria-label="post link to 2022ITHelp dotnet6 xUnitç¯„ä¾‹" href="https://ci-yu.top/dotnet/%E9%90%B5%E4%BA%BA%E8%B3%BD-net6-xunit%E7%AF%84%E4%BE%8B/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2>2022ITHelp dotnet6 NLogç¯„ä¾‹
    </h2>
  </header>
  <div class="entry-content">
    <p>ç›®çš„ åœ¨webapiå°ˆæ¡ˆä¸‹ä½¿ç”¨NLogå¥—ä»¶
å»ºç«‹æ–°å°ˆæ¡ˆ é¸æ“‡ASP.NET Core Web APIå°ˆæ¡ˆç¯„æœ¬ï¼Œä¸¦åŸ·è¡Œä¸‹ä¸€æ­¥ è¨­å®šæ–°çš„å°ˆæ¡ˆ å‘½åä½ çš„å°ˆæ¡ˆåç¨±ï¼Œä¸¦é¸æ“‡å°ˆæ¡ˆè¦å­˜æ”¾çš„ä½ç½®ã€‚ å…¶ä»–è³‡è¨Š ç›´æ¥é€²è¡Œä¸‹ä¸€æ­¥
NuGetåŠ å…¥å¥—ä»¶ NLog NLog.Web.AspNetCore æ–°å¢nlog.configæª”æ¡ˆ åœ¨æ ¹ç›®éŒ„æ–°å¢nlog.configæª”æ¡ˆ nlog.configå¯«å…¥ç¨‹å¼ åœ¨nlog.configå¯«å…¥å®˜æ–¹ç¯„ä¾‹
&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34; ?&gt;&lt;nlog xmlns=&#34;http://www.nlog-project.org/schemas/NLog.xsd&#34;xmlns:xsi=&#34;http://www.w3.org/2001/XMLSchema-instance&#34;autoReload=&#34;true&#34;internalLogLevel=&#34;Info&#34;internalLogFile=&#34;c:\temp\internal-nlog-AspNetCore.txt&#34;&gt;&lt;!-- enable asp.net core layout renderers --&gt;&lt;extensions&gt;&lt;add assembly=&#34;NLog.Web.AspNetCore&#34;/&gt;&lt;/extensions&gt;&lt;!-- the targets to write to --&gt;&lt;targets&gt;&lt;!-- File Target for all log messages with basic details --&gt;&lt;target xsi:type=&#34;File&#34; name=&#34;allfile&#34; fileName=&#34;c:\temp\nlog-AspNetCore-all-${shortdate}.log&#34;layout=&#34;${longdate}|${event-properties:item=EventId_Id:whenEmpty=0}|${level:uppercase=true}|${logger}|${message} ${exception:format=tostring}&#34; /&gt;&lt;!-- File Target for own log messages with extra web details using some ASP....</p>
  </div>
  <footer class="entry-footer"><span title='2022-10-08 01:39:15 +0800 CST'>October 8, 2022</span></footer>
  <a class="entry-link" aria-label="post link to 2022ITHelp dotnet6 NLogç¯„ä¾‹" href="https://ci-yu.top/dotnet/%E9%90%B5%E4%BA%BA%E8%B3%BD-net6-nlog%E7%AF%84%E4%BE%8B/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2>2022ITHelp dotnet6 Serilogé€²éšç¯„ä¾‹
    </h2>
  </header>
  <div class="entry-content">
    <p>ç›®çš„ è®€å–appsettingè¨­å®šæª” äºŒéšæ®µåˆå§‹åŒ– ç‚ºäº†ç°¡å–®åŒ–æ•…å°‡Logå­˜å…¥SQLite å»ºç«‹æ–°å°ˆæ¡ˆ é¸æ“‡ASP.NET Core Web APIå°ˆæ¡ˆç¯„æœ¬ï¼Œä¸¦åŸ·è¡Œä¸‹ä¸€æ­¥ è¨­å®šæ–°çš„å°ˆæ¡ˆ å‘½åä½ çš„å°ˆæ¡ˆåç¨±ï¼Œä¸¦é¸æ“‡å°ˆæ¡ˆè¦å­˜æ”¾çš„ä½ç½®ã€‚ å…¶ä»–è³‡è¨Š ç›´æ¥é€²è¡Œä¸‹ä¸€æ­¥ NuGetåŠ å…¥å¥—ä»¶ Serilog.AspNetCore Serilog.Sinks.SQLite ç·¨è¼¯Program.csæª” using Serilog; //ç¬¬ä¸€éšæ®µåˆå§‹åŒ– // var builder = WebApplication.CreateBuilder(args);æœªä½¿ç”¨äºŒéšæ®µåƒæ•¸åŒ–ï¼Œbuilderæœƒè·‘åˆ°tryå¤–é¢ Log.Logger = new LoggerConfiguration() //.ReadFrom.Configuration(builder.Configuration) .CreateBootstrapLogger(); try { var builder = WebApplication.CreateBuilder(args); // Add services to the container. builder.Services.AddControllers(); // Learn more about configuring Swagger/OpenAPI at https://aka.ms/aspnetcore/swashbuckle builder.Services.AddEndpointsApiExplorer(); builder.Services.AddSwaggerGen(); //ç¬¬äºŒéšæ®µåˆå§‹åŒ–å¯ä»¥å–å¾—appsettingçš„å…§å®¹ï¼Œå¦‚ä¸ä½¿ç”¨ç¬¬äºŒéšæ®µåˆå§‹åŒ–ï¼Œ //æœƒéœ€è¦å°‡ var builderå®£å‘Šå¼æœƒç§»å‡ºtry(å¦‚ä¸Šæ–¹è¨»è§£è™•)ï¼Œå°±æœƒæœ‰é¢¨éšªæœªæ•ç²builderçš„éŒ¯èª¤ builder.Host.UseSerilog( (hostingContext, services, loggerConfiguration) =&gt; { //ä½¿ç”¨appsetting loggerConfiguration.ReadFrom.Configuration(builder.Configuration); }); var app = builder....</p>
  </div>
  <footer class="entry-footer"><span title='2022-10-07 05:39:15 +0800 CST'>October 7, 2022</span></footer>
  <a class="entry-link" aria-label="post link to 2022ITHelp dotnet6 Serilogé€²éšç¯„ä¾‹" href="https://ci-yu.top/dotnet/%E9%90%B5%E4%BA%BA%E8%B3%BD-net6-serilog%E9%80%B2%E9%9A%8E%E7%AF%84%E4%BE%8B/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2>2022ITHelp dotnet6 Serilogç¯„ä¾‹
    </h2>
  </header>
  <div class="entry-content">
    <p>ç›®çš„ åœ¨webapiå°ˆæ¡ˆä¸‹ä½¿ç”¨serilogå¥—ä»¶
å»ºç«‹æ–°å°ˆæ¡ˆ é¸æ“‡ASP.NET Core Web APIå°ˆæ¡ˆç¯„æœ¬ï¼Œä¸¦åŸ·è¡Œä¸‹ä¸€æ­¥ è¨­å®šæ–°çš„å°ˆæ¡ˆ å‘½åä½ çš„å°ˆæ¡ˆåç¨±ï¼Œä¸¦é¸æ“‡å°ˆæ¡ˆè¦å­˜æ”¾çš„ä½ç½®ã€‚ å…¶ä»–è³‡è¨Š ç›´æ¥é€²è¡Œä¸‹ä¸€æ­¥ NuGetåŠ å…¥å¥—ä»¶ Serilog.AspNetCore ç·¨è¼¯Program.csæª” åœ¨æœ€å¤–å±¤åŒ…ä¸€å€‹try catchç›®çš„æ˜¯ç‚ºäº†æ•æ‰å•Ÿå‹•éšæ®µçš„éŒ¯èª¤
using Serilog; using Serilog.Events; Log.Logger = new LoggerConfiguration() //Serilogè¦å¯«å…¥çš„æœ€ä½ç­‰ç´šç‚ºInformation .MinimumLevel.Information() //Microsoft.AspNetCoreé–‹é ­çš„é¡åˆ¥ç­‰æ¥µç‚ºwarning .MinimumLevel.Override(&#34;Microsoft.AspNetCore&#34;, LogEventLevel.Warning) //å¯«logåˆ°Logsè³‡æ–™å¤¾çš„log.txtæª”æ¡ˆä¸­ï¼Œä¸¦ä¸”ä»¥å¤©ç‚ºå–®ä½åšæª”æ¡ˆåˆ†å‰² .WriteTo.File(&#34;./Logs/log.txt&#34;, rollingInterval: RollingInterval.Day) .CreateLogger(); try { Log.Information(&#34;Starting web host&#34;); var builder = WebApplication.CreateBuilder(args); builder.Services.AddControllers(); builder.Services.AddEndpointsApiExplorer(); builder.Services.AddSwaggerGen(); //controllerå¯ä»¥ä½¿ç”¨ILoggerä»‹é¢ä¾†å¯«å…¥logç´€éŒ„ builder.Host.UseSerilog(); var app = builder.Build(); // Configure the HTTP request pipeline. if (app.Environment.IsDevelopment()) { app.UseSwagger(); app.UseSwaggerUI(); } app.UseHttpsRedirection(); app.UseAuthorization(); app.MapControllers(); app.Run(); return 0; } catch (Exception ex) { Log....</p>
  </div>
  <footer class="entry-footer"><span title='2022-10-07 02:39:15 +0800 CST'>October 7, 2022</span></footer>
  <a class="entry-link" aria-label="post link to 2022ITHelp dotnet6 Serilogç¯„ä¾‹" href="https://ci-yu.top/dotnet/%E9%90%B5%E4%BA%BA%E8%B3%BD-net6-serilog%E7%AF%84%E4%BE%8B/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2>2022ITHelp dotnet6 EFCoreèªæ³•èªªæ˜
    </h2>
  </header>
  <div class="entry-content">
    <p>ç›®çš„ èªªæ˜EFCoreåŸºæœ¬èªæ³•ï¼ŒEFCoreçš„åŸºç¤ç‚ºLinqï¼Œæ‰€ä»¥ä½¿ç”¨ä¸Šèˆ‡Linqé‚è¼¯ä¸€æ¨¡ä¸€æ¨£ï¼Œåªæ˜¯èªæ³•æœ‰äº›å¾®å·®ç•°ã€‚
å»ºç«‹æ–°å°ˆæ¡ˆ é¸æ“‡ASP.NET Core Web APIå°ˆæ¡ˆç¯„æœ¬ï¼Œä¸¦åŸ·è¡Œä¸‹ä¸€æ­¥ è¨­å®šæ–°çš„å°ˆæ¡ˆ å‘½åä½ çš„å°ˆæ¡ˆåç¨±ï¼Œä¸¦é¸æ“‡å°ˆæ¡ˆè¦å­˜æ”¾çš„ä½ç½®ã€‚ å…¶ä»–è³‡è¨Š ç›´æ¥é€²è¡Œä¸‹ä¸€æ­¥ NuGetåŠ å…¥å¥—ä»¶ Microsoft.EntityFrameworkCore.Sqlite Microsoft.EntityFrameworkCore.Design æ–°å¢Student.csé¡åˆ¥æª” æ–°å¢Modelsè³‡æ–™å¤¾ï¼Œä¸¦åœ¨è£¡é¢æ–°å¢Student.csé¡åˆ¥æª” ç·¨è¼¯Student.csé¡åˆ¥æª” public class Student { public int Id { get; set; } public string Name { get; set; } = &#34;BillHuang&#34;; public int Age { get; set; } } æ–°å¢EFCoreContext.csé¡åˆ¥æª” æ–°å¢DBContextè³‡æ–™å¤¾ï¼Œä¸¦åœ¨è£¡é¢æ–°å¢EFCoreContext.csé¡åˆ¥æª” ç·¨è¼¯EFCoreContext.csé¡åˆ¥æª” //åˆ¥å¿˜äº†using using Microsoft.EntityFrameworkCore; using EFCoreExample_Advanced.Models; namespace EFCoreExample_Advanced.DBContext { //ç¹¼æ‰¿DbContext public class EFCoreContext : DbContext { //è¤‡å¯«OnConfiguring protected override void OnConfiguring(DbContextOptionsBuilder options) { //æŒ‡å®šé€£ç·šå­—ä¸²ï¼Œé€£åˆ°SQLite options....</p>
  </div>
  <footer class="entry-footer"><span title='2022-10-05 01:39:15 +0800 CST'>October 5, 2022</span></footer>
  <a class="entry-link" aria-label="post link to 2022ITHelp dotnet6 EFCoreèªæ³•èªªæ˜" href="https://ci-yu.top/dotnet/%E9%90%B5%E4%BA%BA%E8%B3%BD-net6-efcore%E8%AA%9E%E6%B3%95%E8%AA%AA%E6%98%8E/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2>2022ITHelp dotnet6 EFCoreç¯„ä¾‹
    </h2>
  </header>
  <div class="entry-content">
    <p>ç›®çš„ é€éEFCoreå°dbåšæŸ¥è©¢ï¼Œç‚ºäº†é™ä½é–€æª»æ¡ç”¨SQLiteç•¶ç¯„ä¾‹è³‡æ–™åº«ã€‚
å»ºç«‹æ–°å°ˆæ¡ˆ é¸æ“‡ASP.NET Core Web APIå°ˆæ¡ˆç¯„æœ¬ï¼Œä¸¦åŸ·è¡Œä¸‹ä¸€æ­¥ è¨­å®šæ–°çš„å°ˆæ¡ˆ å‘½åä½ çš„å°ˆæ¡ˆåç¨±ï¼Œä¸¦é¸æ“‡å°ˆæ¡ˆè¦å­˜æ”¾çš„ä½ç½®ã€‚ å…¶ä»–è³‡è¨Š ç›´æ¥é€²è¡Œä¸‹ä¸€æ­¥ NuGetåŠ å…¥å¥—ä»¶ Microsoft.EntityFrameworkCore.Sqlite Microsoft.EntityFrameworkCore.Design æ–°å¢Student.csé¡åˆ¥æª” æ–°å¢Modelsè³‡æ–™å¤¾ï¼Œä¸¦åœ¨è£¡é¢æ–°å¢Student.csé¡åˆ¥æª” ç·¨è¼¯Student.csé¡åˆ¥æª” public class Student { public int Id { get; set; } public string Name { get; set; } = &#34;BillHuang&#34;; public int Age { get; set; } } æ–°å¢EFCoreContext.csé¡åˆ¥æª” æ–°å¢DBContextè³‡æ–™å¤¾ï¼Œä¸¦åœ¨è£¡é¢æ–°å¢EFCoreContext.csé¡åˆ¥æª” ç·¨è¼¯EFCoreContext.csé¡åˆ¥æª” //åˆ¥å¿˜äº†using using Microsoft.EntityFrameworkCore; using EFCoreExample.Models; namespace EFCoreExample.DBContext { //ç¹¼æ‰¿DbContext public class EFCoreContext : DbContext { //è¤‡å¯«OnConfiguring protected override void OnConfiguring(DbContextOptionsBuilder options) { //æŒ‡å®šé€£ç·šå­—ä¸²ï¼Œé€£åˆ°SQLite options....</p>
  </div>
  <footer class="entry-footer"><span title='2022-10-04 02:39:15 +0800 CST'>October 4, 2022</span></footer>
  <a class="entry-link" aria-label="post link to 2022ITHelp dotnet6 EFCoreç¯„ä¾‹" href="https://ci-yu.top/dotnet/%E9%90%B5%E4%BA%BA%E8%B3%BD-net6-efcore%E7%AF%84%E4%BE%8B/"></a>
</article>
<footer class="page-footer">
  <nav class="pagination">
    <a class="next" href="https://ci-yu.top/page/2/">Next&nbsp;&nbsp;Â»
    </a>
  </nav>
</footer>
    </main>
    
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
